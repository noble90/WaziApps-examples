<html>
    <head>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
     <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>

        <title>Smart House</title>
    </head>
<body style = "background-color:lightblue;margin:40px;"> 
<h1 style = "text-align:center; margin-bottom:2=30px;">EXAMPLE SMART HOUSE</h1> 
    
    <div style="text-align: center; background-color: azure;margin: 5px;">
    <script src="https://cdn.jsdelivr.net/npm/waziup-js@0.0.18/lib/Waziup.js"></script>
  <!--script src="./Waziup.js"></script-->
    <script>
        Waziup.ApiClient.instance.basePath = 'https://api.waziup.io/api/v1'
        var api = new Waziup.SensorsApi()
        api.getMeasurement("waziup", "ISPACE_Sensor78", "TC").then((meas) =>{
        document.getElementById("sensor_value").innerHTML = "The temperature is: " + meas.last_value + "C";
        })
    </script>
    <h2> room temperature</h2>
        <div id="sensor_value">
            Loading...
        </div>
    </div>
    <div style="text-align: center; margin: 5px; background-color: azure;">
        <h3>My house</h3>
        <p id="demo"></p>
        <a href="http://192.168.43.242/switch/off/"><button onclick="document.getElementById('demo').innerHTML = 'Lights off'">Turn off LIGHT</button> </a>
        <a href="http://192.168.43.242/switch/on/"><button onclick="document.getElementById('demo').innerHTML = 'Lights On'">Turn on LIGHT</button> </a><br>
    </div>
    <div style="text-align: center;margin: 5px; background-color: azure;">
        <H3>house Location</H3>
   
<div>
  <div id="mapid" style="height:600px"></div>
  <script src="https://cdn.jsdelivr.net/npm/waziup-js@0.0.18/lib/Waziup.js"></script>
  <script>
      var mymap = L.map('mapid').setView([-6.774619,39.241261], 18);
      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
         attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
         maxZoom: 8,
         id: 'mapbox.streets',
         accessToken: 'pk.eyJ1IjoiY2R1cG9udDIiLCJhIjoiY2pnZTVkZ2xsMGxyZTJ4cjA5dDZ4cjNneSJ9.NJT7CULfcY0mjeavffR_vg'
      }).addTo(mymap);
    
    Waziup.ApiClient.instance.basePath = 'https://api.waziup.io/api/v1'
    var api = new Waziup.SensorsApi()
    var markers = []
    api.getSensors("waziup", {limit:1000}).then((sensors) =>{
      console.log("data" + JSON.stringify(sensors))
      for(sensor of sensors) {
        if(sensor.location) {
          L.marker([sensor.location.latitude, sensor.location.longitude]).addTo(mymap);
        }
      }
    })
 </script>
    </div>
    
</body>
</html>
